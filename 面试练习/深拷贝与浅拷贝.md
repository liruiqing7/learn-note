# å‰è¨€

ä»€ä¹ˆæ˜¯æ·±æµ…æ‹·è´ï¼Ÿ
åœ¨ js ä¸­ï¼Œæ•°æ®ç±»å‹åˆ†ä¸ºåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹ï¼›
1ã€åŸºæœ¬æ•°æ®ç±»å‹ï¼šå®ƒçš„å€¼ç›´æ¥å­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­ã€‚
2ã€å¼•ç”¨æ•°æ®ç±»å‹ï¼šå®ƒçš„åœ¨æ ˆå†…å­˜ä¸­åªå‚¨å­˜äº†å¼•ç”¨ï¼Œè€ŒçœŸæ­£çš„å€¼åˆ™å‚¨å­˜åœ¨å †å†…å­˜ä¸­ã€‚

#### ğŸŒ° ä¸€ã€åŸºæœ¬æ•°æ®ç±»å‹

```js
let a = "lee";
let b = a;
b = 3;
console.log(a); // lee
console.log(b); // 3
```

ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªåŸºæœ¬ç±»å‹èµ‹å€¼ä¸ aï¼Œæ¥ç€å°†å˜é‡ a èµ‹å€¼ä¸ bã€‚å½“æˆ‘ä»¬ä¿®æ”¹ b æ—¶ï¼Œa çš„å€¼æ²¡æœ‰è·Ÿç€æ”¹å˜ã€‚è¿™è¯´æ˜ï¼Œä¸¤ä¸ªæ•°æ®éƒ½æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ã€‚

#### ğŸŒ° äºŒã€å¼•ç”¨æ•°æ®ç±»å‹

```js
let obj1 = {
  name: "lee",
  age: "23",
};
let obj2 = obj1;
obj2.name = "hello world";
console.log(obj1.name); // 'hello world'
console.log(obj2.name); // 'hello world'
```

ä¸Šé¢ä¾‹å­ä¸­ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å€¼éƒ½è¢«æ”¹å˜äº†ã€‚è¿™è¯´æ˜ï¼Œã€Œå¯¹è±¡ã€æ˜¯å¼•ç”¨ç±»å‹çš„å€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹æ¥è¯´ï¼Œæˆ‘ä»¬å°† obj1 èµ‹äºˆ obj2 æ—¶ï¼Œåªæ˜¯å°† obj1 å‚¨å­˜åœ¨æ ˆå†…å­˜ä¸­çš„å¼•ç”¨èµ‹äºˆäº† obj2ï¼Œè€Œæ­¤æ—¶ï¼Œä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨æŒ‡å‘äº†æ ˆå†…å­˜ä¸­çš„åŒä¸€ä¸ªæ•°æ®ã€‚æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä»¥ä¸Šä¸¤ä¸ªå˜é‡çš„ä»»æ„ä¸€ä¸ªæ—¶ï¼Œéƒ½ä¼šä¿®æ”¹å †å†…å­˜çš„æ•°æ®ã€‚

## æµ…æ‹·è´

å¯¹äºæµ…æ‹·è´è€Œè¨€ï¼Œå°±åªæ˜¯æ‹·è´æ•°æ®çš„å¼•ç”¨ã€‚è€Œä¸æ˜¯æ·±å±‚æ¬¡çš„æ‹·è´æ•°æ®æ”¾åœ¨å †å†…å­˜çš„å€¼ï¼Œå½“å¤šä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œä»»ä½•ä¿®æ”¹éƒ½ä¼šä½¿å¾—æ‰€æœ‰å¼•ç”¨æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå› ä¸ºä»–ä»¬å°±æ˜¯åŒä¸€æ¡æ•°æ®ã€‚

## æ·±æ‹·è´

åœ¨å®é™…è¿ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä½¿ä¸åŒçš„å€¼ï¼ŒæŒ‡å‘ä¸åŒçš„å †å†…å­˜ã€‚è¿™æ ·ï¼Œæ·±æ‹·è´å°±è¯ç”Ÿäº†ã€‚
âš ï¸ æ·±æ‹·è´ä½œç”¨åœ¨å¼•ç”¨ç±»å‹ä¸Šï¼ï¼ï¼ ä¾‹å¦‚ï¼šObjectã€Arrayã€‚

é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬çŸ¥é“ï¼Œæ·±æ‹·è´ä¸ä¼šæ‹·è´æ•°æ®çš„å¼•ç”¨ç±»å‹ï¼Œè€Œæ˜¯å°†å¼•ç”¨ç±»å‹æ‰€æŒ‡å‘çš„å †å†…å­˜ä¸­çš„å€¼æ‹·è´ä¸€ä»½ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªæ–°çš„å¼•ç”¨ç±»å‹ã€‚ä»¥æ­¤é¿å…å¼•ç”¨é”™ä¹±çš„é—®é¢˜ï¼Œå½“æˆ‘ä»¬å¤šæ¬¡ä½¿ç”¨åŒæ ·çš„æ•°æ®ï¼Œä¹Ÿä¸å¿…æ‹…å¿ƒæ•°æ®ä¹‹é—´ä¼šæœ‰å†²çªã€‚

## ğŸŒ° æ·±æµ…æ‹·è´çš„å®ç°

### 1ã€ä¹ä¸ç‰ˆæ·±æ‹·è´ ã€‚JSON.stringify()åŠ JSON.parse()

```js
let obj = {
  name: "lee",
  age: 23,
};
let obj_copy = JSON.stringify(obj);
let obj_real = JSON.prase(obj_copy);
obj_real.age = 24;
console.log(obj.age); // 23
console.log(obj_real.age); // 24
```

ä¸Šè¿°ä»£ç å¯ä»¥çœ‹åˆ°å¹¶æ²¡æœ‰å‘ç”Ÿå¼•ç”¨é”™ä¹±çš„é—®é¢˜ï¼Œä¿®æ”¹ obj_real çš„å€¼ï¼Œå¹¶ä¸ä¼šå¯¹åŸå§‹çš„ obj é€ æˆå½±å“ã€‚
ä¹ä¸ç‰ˆçš„åŸå› ï¼š
JSON.stringify()åŠ JSON.prase()å®é™…ä¸Šæ˜¯å°†å€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä¸æ‹·è´å¼•ç”¨å¯¹è±¡ï¼Œè€Œæ˜¯æ‹·è´ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™ä¼šæ–°è¾Ÿä¸€ä¸ªå­˜å‚¨åœ°å€ï¼Œè¿™æ ·å°±åˆ‡æ–­äº†å¼•ç”¨å¯¹è±¡çš„æŒ‡é’ˆè”ç³»ã€‚
æ‰€ä»¥ï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸èƒ½æ‹·è´ undefinedï¼Œnullï¼Œfunction ä»¥åŠ RegExp ç­‰ç›¸å…³ç±»å‹çš„ã€‚

### 2ã€æ¸è¿›ç‰ˆ Object.assign(target,source)

```js
let obj = {
  name: "lee",
  age: 23,
};

let obj_copy = Object.assign({}, obj);
obj_copy.age = 24;
console.log(obj); // 23
console.log(obj_copy); //24
```

`Object.assign(target,source)` æ–¹æ³•ç”¨äºå¯¹è±¡çš„åˆå¹¶,å°†æºå¯¹è±¡`(source)`çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡(target)ã€‚
âš ï¸ `æ³¨æ„ï¼Œå¦‚æœç›®æ ‡å¯¹è±¡ä¸æºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œæˆ–å¤šä¸ªæºå¯¹è±¡æœ‰åŒåå±æ€§ï¼Œåˆ™åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§`ã€‚

```js
// Object.assign è¯´æ˜ï¼š
// 1ã€å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼ŒObject.assignä¼šç›´æ¥è¿”å›è¯¥å‚æ•°ã€‚

const obj = { age: 23 };
Object.assign(obj) === obj; // true

// 2ã€å¦‚æœå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™ä¼šå…ˆè½¬æˆå¯¹è±¡ï¼Œç„¶åè¿”å›

Object.assign("lee"); //{0:'l',1:'e',2:'e'}
typeof Object.assign("lee"); // 'object'
// 3ã€ç”±äºundefinedå’Œnull æ— æ³•è½¬ä¸ºå¯¹è±¡ï¼Œæ‰€ä»¥ä»–ä»¬ä½œä¸ºå‚æ•°çš„è¯ï¼Œä¼šæŠ¥é”™ã€‚
// 4ã€Object.assignæ‹·è´çš„å±æ€§æ˜¯æœ‰é™åˆ¶çš„ï¼Œåªèƒ½æ‹·è´æºå¯¹è±¡çš„è‡ªèº«å±æ€§ï¼ˆä¸æ‹·è´ç»§æ‰¿å±æ€§ï¼‰ï¼Œä¸èƒ½æ‹·è´ä¸å¯æšä¸¾çš„å±æ€§ï¼ˆenumerable: falseï¼‰ã€‚
Object.assign(
  { age: 23 },
  Object.defineProperty({}, "invisible", {
    enumerable: false,
    value: "hello",
  })
);
// {age:23}
```

è¿™ç§æ–¹å¼çœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿™åªæ˜¯ä¸€å±‚å¯¹è±¡ï¼Œå¦‚æœå¤šå±‚åµŒå¥—ï¼š

```js
let obj = {
  name: "lee",
  age: 23,
  friend: ["Jony", "Robin", "Hans"],
};

let obj_copy = Object.assign({}, obj);
obj_copy.friend[1] = "Proust";
console.log(obj.friend); // ["Jony", "Proust", "Hans"]
console.log(obj_copy.friend); //["Jony", "Proust", "Hans"]
```

æ‰€ä»¥ï¼Œå¯¹äºä¸€å±‚å¯¹è±¡æ¥è¯´çš„è¯æ˜¯æ²¡æœ‰é—®é¢˜çš„é¢ï¼Œä½†æ˜¯å¦‚æœå¯¹è±¡çš„å±æ€§å¯¹åº”çš„æ˜¯å…¶ä»–å¼•ç”¨ç±»å‹çš„è¯ï¼Œè¿˜æ˜¯åªæ‹·è´äº†å¼•ç”¨ï¼Œä¿®æ”¹æ‹·è´åæ•°æ®çš„å€¼ï¼Œè¿˜æ˜¯ä¼šé€ æˆæ•°æ®æ±¡æŸ“ã€‚

### 3ã€å®Œå–„ç‰ˆ é€’å½’æ‹·è´

```js
// å®šä¹‰ä¸€ä¸ªæ·±æ‹·è´å‡½æ•° æ¥å—ç›®æ ‡targetå‚æ•°

const deepClone = (target) => {
  //å®šä¹‰ä¸€ä¸ªå˜é‡
  let result;
  //å¦‚æœå½“å‰éœ€è¦æ·±æ‹·è´çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„è¯
  if (typeof target === "object") {
    // å¦‚æœæ˜¯ä¸€ä¸ªæ•°ç»„
    if (Array.isArray(target)) {
      result = []; // å°†resultèµ‹å€¼ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”æ‰§è¡Œéå†
      for (let i in target) {
        // é€’å½’å…‹éš†æ•°ç»„ä¸­æ¯ä¸€é¡¹
        result.push(deepClone(target[i]));
      }
    } else if (target === null) {
      // åˆ¤æ–­å¦‚æœæ˜¯nullï¼Œçº ç»“èµ‹å€¼ä¸ºnull
      result = null;
    } else if (target.constructor === RegExp) {
      // åˆ¤æ–­å¦‚æœæ˜¯RegExpå¯¹è±¡çš„è¯ï¼Œç›´æ¥èµ‹å€¼
      result = target;
    } else {
      // å¦åˆ™ä¾¿æ˜¯æ™®é€šå¯¹è±¡ï¼Œç›´æ¥forå¾ªç¯ï¼Œé€’å½’èµ‹å€¼å¯¹è±¡çš„æ‰€æœ‰å€¼
      result = {};
      for (let i in target) {
        result[i] = deepClone(target[i]);
      }
    }
  } else {
    // å¦‚æœä¸æ˜¯å¯¹è±¡çš„è¯ï¼Œå°±æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼
    result = target;
  }
  return result;
};
```

ä¸Šè¿°ä»£ç ä¾‹å¦‚é€’å½’å¾ªç¯è°ƒç”¨è‡ªèº«çš„æ–¹æ³•ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆ¤æ–­æ‹·è´ä¸”èµ‹å€¼ã€‚
å¯ä»¥è§£å†³ç›®å‰æ‰€æœ‰æ‹·è´åœºæ™¯ã€‚
