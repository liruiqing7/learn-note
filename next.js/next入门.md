# 什么是 Next.js?

Next.js 是一个开源的基于 React 的框架，用于构建服务器端渲染的网络应用。Next 提供了一系列的功能和工具，简化了开发流程。它的一些关键功能包括自动拆分代码、优化性能、无缝的服务器端渲染，以及易于设置和部署。Next 以其对简单性、性能和可扩展性的关注，已经成为开发构建的热门选择。它提供了一个灵活的模块化架构，可以适应广泛的用例和项目。

## Next.js 的优势

1. 完善的工程化机制
   不需要自己配置 webpack 方案，next 有内置的工程化基础：

- babel 内置，支持 JS 代码向后兼容
- postcss 内置，支持 CSS 代码向后兼容
- browserslist 支持配置兼容浏览器信息，配合 babel 和 postcss 工作
- Typescript 可选择使用，保证代码质量，增加可阅读和可维护性。
- eslint 可选择使用，检测代码格式，可自定义规则。vscode 编写代码，或者 build 打包时都有提示。
- prettier 可通过扩展使用，格式化代码，可自定义规则。
- css modules 内置。
- css-in-js 可扩展使用。
- tailwind css 可扩展使用。
- 打包优化功能
  - tree shaking
  - 代码压缩
  - 页面自动静态化
  - 按需打包第三方 es 包（通过设置 transpilePackages 属性，让部分包可以被 next-babel 打包）
  - 异步动态加载组件，和 React.lazy 功能一样，只不过实现得更早。

基本上使用 next.js 就无需过度关注及处理工程化相关的事项。

2. 良好的开发和构建性能

next13 发布会上，官方公布了 turbopack 进行打包。开发模式下，next.js 都是动态编译，启动的时候不回去编译页面，访问才会编译，而且因为是多页应用，页面非共用部分互不影响，不会因为工程的业务模块变多而导致页面访问变慢。

4. 智能文件路由系统

Next.js 的智能文件路由指的是，页面写在 pages 目录，或者 src/pages 下的 js 文件都会被认为是页面，都会当成页面来打包，路由定义了一套动态路由规则。

5. 多种渲染模式保证页面的性能体验

   [基础渲染模式](/next.js/前端基础渲染模式.md)

6. 可扩展配置
   next 有一套默认配置，但配置是可扩展的。

- 配置文件 next.config.js 中暴露了 webpack 实例
- 配置文件 next.config.js 中支持配置自定义，可以把公用不变的配置写在 serverRuntimeConfig 或者 publicRuntimeConfig 中，前者只会出现在服务端，后者会暴露到客户端。
- 可自定义 server，可以在启动服务的时候做一些自己想要的处理，比如 node.js 性能监控等等。
- 不定义 server，也可以使用它提供的 middreware 机制来拦截请求或者校验权限等事项。
- 自定义 APP，也就是\_app.js，它用于处理多个页面公共部分。
- 自定义 Document，也就是\_document.js，用于自定义配置 html 生成内容，比如插入 Google 分析脚本。
- 自定义错误边界，例如 404 或者 500 错误页面等。
- 可自定义 babel 和 postcss 等工程化规则配置。

7. 提供其他多方面性能优化方案
   - 图片优化
   - 字体优化
